

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation</title>
    
    <link rel="stylesheet" href="_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage.html" title="How to use PropGen, what to put on Wiki, building a PDF file"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="motivation.html" title="Why this tool?"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PropGen 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation</h1>
<div class="section" id="quick-and-dirty-virtual-machine">
<h2>Quick and dirty, virtual machine</h2>
<p>To get your own version of PropGen up and running quickly, use the virtual machine.</p>
<ul>
<li><p class="first">Download it from Ubuntu One, using this link: <a class="reference external" href="http://ubuntuone.com/6CMWlbTtjxQtjhed24ZIkn">http://ubuntuone.com/6CMWlbTtjxQtjhed24ZIkn</a></p>
</li>
<li><p class="first">It is a VirtualBox-produced Open Virtualization Appliance. It should work out of the box under VirtualBox and can (probably) be used under different hypervisors. Import it in your hypervisor.</p>
<blockquote>
<div><ul class="simple">
<li>Note: under VirtualBox, it is configured to use NAT network access. There are two port forwarding rules configured for port 8080 (to access the Wiki) and 9001 (to access the Etherpad). You most probably want to check whether this is suitable for your local hypervisor setting as well.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Start the virtual machine.</p>
</li>
<li><p class="first">Point your browser to this virtual machine, port 8080 gives the wiki, 9001 the etherpad-lite. Login into the Wiki using ProjectMaster and password 123abc. Go to <a class="reference external" href="http:/">http:/</a>/&lt;virtualmachine&gt;:8080/TestProject . Click on &#8220;CreatePDF&#8221; and enjoy the PDF for a proposal.</p>
</li>
<li><p class="first">Predefined accounts:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Unix user: propgen , Password: abc123</dt>
<dd><ul class="first last simple">
<li>To change: log into the virtual machine, type &#8220;passwd&#8221; at the prompt</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wiki user: ProjectMast , Password 123abc</dt>
<dd><ul class="first last simple">
<li>To change: log into the wiki, ???</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Mysql user: root, Password: abc123</dt>
<dd><ul class="first last simple">
<li>To change: $ sudo dpkg-reconfigure mysql-server-5.5</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Mysqk user: propgen, Password: abc123</dt>
<dd><ul class="first last simple">
<li>To change: Follow instructions here: <a class="reference external" href="https://github.com/Pita/etherpad-lite/wiki/How-to-use-Etherpad-Lite-with-MySQL">https://github.com/Pita/etherpad-lite/wiki/How-to-use-Etherpad-Lite-with-MySQL</a>; remember to edit ~/etherpad-lite/settings.json</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="quick-and-dirty-own-installation">
<h2>Quick and dirty, own installation</h2>
<p>The fastest possible way to get everything set up and
produce a proposal PDF, assuming you have latex and python set up:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/tmp
<span class="nv">$ </span>wget --no-check-certificate https://github.com/hkarl/propgen/zipball/master --output-document<span class="o">=</span>propgen.zip
<span class="nv">$ </span>unzip propgen.zip
<span class="nv">$ </span><span class="nb">cd </span>hkarl-propgen-7d7fd2d/
<span class="nv">$ </span><span class="nb">cd </span>moin
<span class="nv">$ </span>python wikiserver.py &amp;
<span class="nv">$ </span><span class="nb">cd</span> ..
<span class="nv">$ </span>make
</pre></div>
</div>
<p>Note: the directory name of hkarl-propgen-XXXX will
depend on the fingerprint of the current version in
github. It will vary.</p>
<p>That will leave TestProject.pdf in the current directory. Use your webbrowser to go to <a class="reference external" href="http://127.0.0.1:8080/TestProject">http://127.0.0.1:8080/TestProject</a>, make some changes to this page or to the Wiki pages linked from there, save the changes. Type make again in the shell. Gives an updated PDF file.</p>
</div>
<div class="section" id="usage-scenarios">
<h2>Usage scenarios</h2>
<div class="section" id="external-wiki">
<h3>External Wiki</h3>
<p>A typical usage scenario of this PropGen tool is the
following:</p>
<ul class="simple">
<li>A proposal is to be prepared by a group of people.</li>
<li>One of them runs the wiki, or an external Wiki provider
is used</li>
<li>Several people install the PropGen tool (ignoring the
built-in Wiki) and can then built the PDF file for the
proposal.</li>
<li>Not everybody needs to install PropGen. Ideally, a
version control system like SVN is integrated and
whoever generates a new PDF file commits it to this
version control system. Then, everybody has access to
reasonably up-to-date versions.</li>
</ul>
<p>This scenario is fairly straightforward to set up. I
assume here that you have your external Wiki set up and
know how to administer it.</p>
</div>
<div class="section" id="built-in-wiki">
<h3>Built-in Wiki</h3>
<p>An alternative is to use the MoinMoin Wiki included in
the PropGen distribution. Then, one partner has to run
this wiki. Ideally and typically, the same machine is
then able to run PropGen and to generate the proposal
PDF. This can conveniently be triggered via a crontab
(e.g., do an hourly build) and the result can be put
into a version control system similar to above.</p>
<p>If other partners want to setup PropGen as well to
locally generate the PDF, that is no problem at all.</p>
<p>Advantage of this approach is that the generation scripts can
directly talk to the wiki and there is no need to go
over the network to pull the wiki files. This is
substantially more reliable, faster, and easier to
setup (in particular, if there are firewalls or proxies
in place, which can be real trouble). The disadvantage
is that often, a Wiki is already in place, people have
their accounts on it, are accustomed to its syntax and
quirks, it can have powerful features not present in
the provided MoinMoin installation (e.g, Twiki has a
very useful butracker that can be very beneficial
during proposal writing). The choice is yours!</p>
</div>
<div class="section" id="integrating-a-version-control-system">
<h3>Integrating a version control system</h3>
<p>As outlined above, it can be extremely useful to
integrate a version control system like SVN. I would
recommend to limit this to the latex directory, only
committing files in this directory.</p>
<p>Nothing is done automatically here since the variety of
VCS systems is large. But it should be a simple
exercise to integrate corresponding commit commands in
the Makefile.</p>
<p>However, some care has to be taken in that symbolic
links from the LaTeX directory to the &#8220;generated&#8221;
directory are used. The reason is that it can be
convenient, towards the end of a proposal preparation
process, to stop pulling some parts of a proposal from
the Wiki and to rather work on the LaTeX files
directly. This allows better fine-tuning then working
via the Wiki. The process is simple: replace the
symbolic link by the actual file. Then, this file is
used and it is not touched by the generation process.</p>
</div>
</div>
<div class="section" id="actual-installation">
<h2>Actual installation</h2>
<div class="section" id="prerequisites">
<h3>Prerequisites</h3>
<p>You need the following software installed:</p>
<dl class="docutils">
<dt>Python</dt>
<dd>You will need Python version 2.7.2 or
later. Python 3 is known not to work at this time,
Python 2.6 is too old.</dd>
<dt>Mechanize</dt>
<dd>If you want to pull in Wiki files over the
network (e.g., from a remote Twiki), then you need the
python mechanize module installed. Details can be found
on the <a class="reference external" href="http://wwwsearch.sourceforge.net/mechanize/">Mechanize webpage</a><span class="link-target"> [http://wwwsearch.sourceforge.net/mechanize/]</span>.</dd>
<dt>Tex</dt>
<dd>An up-to-date LaTeX installation. TexLive 2011 was
used for development. Non-standard packages or packages
which needed patches are provided in the distribution.</dd>
<dt>Make</dt>
<dd>There is a simple makefile in place. It is not
absolutely needed and could quite easily be replaced by
shell scripts or batch files.</dd>
<dt>Bash</dt>
<dd>The makefile uses some simple loop and test
constructs of bash. (See the clean target, e.g.) It
should not be difficult to do without or provide a
version for another shell.</dd>
<dt>Operation system</dt>
<dd>Development and testing took place on Mac OSX
Snow Leopard. Normal Linux distributions should pose no
problems at all. Installation on Window is likely to be
problematic because of symbolic links, and makefiles,
bash etc. is likely to require at least cygwin - but I
have very little clue of Windows and dare not make any
statements here. Your mileage might vary.</dd>
<dt>Sphinx</dt>
<dd>If you should want to generate the documentation for
the reStructuredText markup (I have no idea why you
would want to do that), you will also need <a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a><span class="link-target"> [http://sphinx.pocoo.org/]</span> , at least version
1.1.2. In particular, you will also need the aafigure
extension (see
<a class="reference external" href="http://packages.python.org/sphinxcontrib-aafig/">http://packages.python.org/sphinxcontrib-aafig/</a> ) to
be installed and added to conf.py; affigure also
needs a dependency repotlab.</dd>
</dl>
</div>
<div class="section" id="id1">
<h3>Installation</h3>
<ul class="simple">
<li>Download the PropGen package and unpack to a folder of
your choice.<ul>
<li>From github:<ul>
<li>Main page: <a class="reference external" href="https://github.com/hkarl/propgen">https://github.com/hkarl/propgen</a></li>
<li>GIT Read-Only: git://github.com/hkarl/propgen.git</li>
<li>ZIP file:
<a class="reference external" href="https://github.com/hkarl/propgen/zipball/master">https://github.com/hkarl/propgen/zipball/master</a></li>
</ul>
</li>
<li>Other sources still to come (possibly even a virtual
machine)</li>
</ul>
</li>
<li>Decide which Wiki to use and set it up correctly.<ul>
<li>Internal wiki: See <a class="reference internal" href="#sec-setting-up-moinmoin"><em>Setting up the MoinMoin Wiki included in distribution</em></a></li>
<li>For both internal and external wiki: simply add
information to settings.cfg (see
<a class="reference internal" href="#sec-setting-up-settings-cfg"><em>Setting up wiki in settings.cfg</em></a>)</li>
</ul>
</li>
<li>Add the templates to an external Wiki<ul>
<li>Example templates for MoinMoin and Twiki are
included in the templates folder. Ignore the
directories; they are just to group the wiki files
a bit. Each file becomes one Wiki page with the
corresponding filename.</li>
<li>This step is not necessary when using the internal
Wiki; it is pre-populated with an example pseudo
project which should be easy to modify.</li>
<li>It might make sense to rename the &#8220;TestProject&#8221; page to
some more specific for your project. (Then, remember to
also rename the corresponding entry in settings.cfg.)</li>
</ul>
</li>
<li>Once you have setup Wiki access and the Wiki is
running, try to generate a PDF file. cd into the main
propgen directory and type make.</li>
</ul>
</div>
</div>
<div class="section" id="setting-up-the-moinmoin-wiki-included-in-distribution">
<span id="sec-setting-up-moinmoin"></span><h2>Setting up the MoinMoin Wiki included in distribution</h2>
<p>If you want to use an external wiki (e.g., an existing
Twiki), you can skip this section.</p>
<p>For more details, check the documentation of the
MoinMoin Wiki.</p>
<div class="section" id="preconfigured-account">
<h3>Preconfigured account</h3>
<p>The distributed version of MoinMoin is setup to support
accounts, require login to edit or download material,
and to deny anonymous access.</p>
<p>It has a preconfigured account ProjectMaster with
password 123abc. This account ProjectMaster is
configured as a superuser in MoinMoin. Check the lines</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">acl_rights_default</span> <span class="o">=</span> <span class="s">u&quot;ProjectMaster:read,write,delete,revert,admin Known:read,write,revert,delete&quot;</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">superuser</span> <span class="o">=</span> <span class="p">[</span><span class="s">u&quot;ProjectMaster&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>in the file moin/wikiconfig.py. It gives admin rights
to the ProjectMaster account, and usual read, write,
revert, delete rights to all other known accounts.</p>
</div>
<div class="section" id="change-password">
<h3>Change password</h3>
<p>Obviously, you really, really want to change the
password of this superuser. Log in as the user for
which you want to change password, go to &#8220;Settings&#8221; (link
on the very top of the page, to the left), then click
&#8220;Change password&#8221;.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/MoinMoin-ChangePassword.png"><img alt="_images/MoinMoin-ChangePassword.png" src="_images/MoinMoin-ChangePassword.png" style="width: 161.5px; height: 37.0px;" /></a>
</div>
<p>Or go directly to
<a class="reference external" href="http://127.0.0.1:8080/ProjectMaster?action=userprefs&amp;sub=changepass">http://127.0.0.1:8080/ProjectMaster?action=userprefs&amp;sub=changepass</a>
(and replace &#8220;ProjectMaster&#8221; by the account name for
which you want to change the password, of course).</p>
</div>
<div class="section" id="adding-accounts">
<h3>Adding accounts</h3>
<p>You could stick to the preconfigured account and
distribute this account name and password to all
members of your team. However, then it will not be
possible to track who did which changes.</p>
<p>Hence, it is usually preferable to assign a dedicated
username/password to each team member.</p>
<p>To add a user, you need to login as the superuser
ProjectMaster. Go to the Wiki page NewUser (e.g., if
you run it locally on the default port, goto
<a class="reference external" href="http://127.0.0.1:8080/NewUser">http://127.0.0.1:8080/NewUser</a>), and create as many
users as you like.</p>
</div>
<div class="section" id="rename-the-main-project-page">
<h3>Rename the main project page</h3>
<p>In case you want a different main page name, simply use
the &#8220;Rename page&#8221; action of the Wiki. Remember to
rename the corresponding setting (projectName) in
settings.cfg as well!</p>
</div>
<div class="section" id="run-the-moinmoin-wiki">
<h3>Run the MoinMoin Wiki</h3>
<p>Simple:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>moin
<span class="nv">$ </span>python wikiserver.py &amp;
</pre></div>
</div>
<p>You might want to start this as a daemon, possibly
start automatically after reboot. Consult your own
operating system how to do that.</p>
</div>
<div class="section" id="updating-moinmoin">
<h3>Updating Moinmoin</h3>
<ul class="simple">
<li>Overwrite existing files</li>
<li>wikiserverconfig.py
- set hostname, possibly port</li>
<li>wikiconfig.py : Make sure you got the following lines, replacing the DesktopEditing=True part</li>
</ul>
<div class="highlight-python"><pre>DesktopEdition = False # give all local users full powers
acl_rights_default = u"ProjectMaster:read,write,delete,revert,admin Known:read,write,revert,de</pre>
</div>
<dl class="docutils">
<dt>lete&#8221;</dt>
<dd><p class="first"># acl_rights_default = u&#8221;All:read,write,delete,revert,admin&#8221;
surge_action_limits = None # no surge protection
sitename = u&#8217;Generate EU FP7 Proposal from MoinMoin wiki&#8217;
logo_string = u&#8217;&lt;img src=&#8221;%s/common/moinmoin.png&#8221; alt=&#8221;MoinMoin Logo&#8221;&gt;&#8217; % url_prefix_static</p>
<p>auth = [MyAuth()]</p>
<p class="last">superuser = [u&#8221;ProjectMaster&#8221;]</p>
</dd>
</dl>
<ul class="simple">
<li>follow <a class="reference external" href="http://moinmo.in/FeatureRequests/DisableUserCreation#Solution_for_1.9_to_only_allow_superusers_to_create_new_accounts">http://moinmo.in/FeatureRequests/DisableUserCreation#Solution_for_1.9_to_only_allow_superusers_to_create_new_accounts</a> (or just copy myauth.py from old installation; should still be there if you&#8217;ve overwritten the old installation)
- add the import command: from myauth import MyAuth to wikiconfig.py</li>
<li>also check: <a class="reference external" href="http://wiki.apache.org/thrift/HelpOnMoinCommand">http://wiki.apache.org/thrift/HelpOnMoinCommand</a></li>
</ul>
</div>
</div>
<div class="section" id="setting-up-wiki-in-settings-cfg">
<span id="sec-setting-up-settings-cfg"></span><h2>Setting up wiki in settings.cfg</h2>
<p>The file settings.cfg contains both basic
configurations to ensure that the download script talks
to the right wiki server as well as basic configuration
options about what kind of information to generate. The
latter content-customization options are described
elsewhere (Section <a class="reference internal" href="sourcecodedoc.html#sec-settings-cfg"><em>settings.cfg</em></a>). Here, we concentrate on basic connectivity
settings.</p>
<div class="section" id="wiki">
<span id="index-0"></span><h3>Wiki</h3>
<p>See LICENCE file for licencing information!
Set up the necessary information to access the  wiki: which type,
where can it be found, what is the start page, which account and password
to use to log in.</p>
<dl class="describe">
<dt>
<tt class="descname">projectName</tt></dt>
<dd><p>This option specificies the root Wiki page where the main project information can
be found. It also serves as the filename of the final pdf file.</p>
<p>Default:   SDNIDE</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">wikitype</tt></dt>
<dd><p>The wikitype setting selects which type of wiki access is to be
used. Wikitypes currently supported are: twiki, moinmoin and moinmoin-local</p>
<p>Option 1: moinmoin-local
This option specifies that the a moinmoin wiki can be accessed in
the same file system where the generation system executes. This
option requires to sepcify the moinmoinpath option as well. No user
and password need to be given, but the files must be accessible for
reading.</p>
<p>Option 2: moinmoin</p>
<p>A moinmoin wiki is used and accessed remotely, using the mechanize
library. To this end, both the wikiuser and wikipassword option need
to be specified; they are used for login. Also, the baseURL option
needs to be specified: it provides a URL where the wiki can be
accessed, without any concrete page name. Example:</p>
<p>baseURL = <a class="reference external" href="http://hk-vm.cs.uni-paderborn.de:8080/">http://hk-vm.cs.uni-paderborn.de:8080/</a></p>
<p>Option 3: twiki</p>
<p>It needs the same options as moinmoin as well as the loginURL
setting. The difference is that the obtained files are parsed
assuming the twiki syntax and the login process to a Twiki is
slightly different from a moinmoin wiki.
The distribution&#8217;s configuration file example assumes a moinmoin-local</p>
<p>Default:   moinmoin-local</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">moinmoinpath</tt></dt>
<dd><p>Specify the moinmoin path in the standard PropGen distribution. This
option is only relevant if wikitype = moinmoin-local and can be left
out for other wiki types.</p>
<p>Default:   ../moin/</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">baseURL</tt></dt>
<dd><p>For remote access to a wiki. It specifies the &#8220;root&#8221; URL where the
wiki can be accessed, without any particular page name. It is ignored for the moinmoin-local
wikitype and only used for other wikitypes.</p>
<p>Default:   <a class="reference external" href="http://hk-vm.cs.uni-paderborn.de:8080/">http://hk-vm.cs.uni-paderborn.de:8080/</a></p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">wikiuser</tt></dt>
<dd><p>The wikiuser account name to use to log in. Ignored in the
moinmoin-local wikitype. The default corresponds to the account name
preset in the distribution&#8217;s moinmoin wiki. Change this option to
reflect your own user name.</p>
<p>Default:   ProjectMaster</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">wikipassword</tt></dt>
<dd><p>Password used to log in. The default is the one used in the
distribution&#8217;s example moinmoin wiki. You definitely want to change
the password on the wiki and then reflect this change here. It is ignored in the
moinmoin-local wikitype and only needed for remote access.</p>
<p>Default:   123abc</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">loginURL</tt></dt>
<dd><p>Some remote wikis usually need a special login URL, e.g., Twiki
wikis. Specify here. This setting is ignored in both the
moinmoin-local wikitype (where no login is needed at all) and in the
moinmoin wikitype (were the login URL is constructed directly from
the baseURL and no separate URL is needed).</p>
<p>Default:   <a class="reference external" href="https://twiki.sics.se/bin/login">https://twiki.sics.se/bin/login</a></p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpProxyIP</tt></dt>
<dd><p>For remote Wiki access through a proxy: These variables are used by
the mechanize module, for access via an HTTP or HTTPS proxy. You can
specify the proxy&#8217;s IP, port number, and user and password, if
needed. You can do that separately for HTTP and HTTPS access.  But
this does not always works out well.  Also, this functionality is
not well tested. Your mileage WILL vary! All the defaults are just
empty.</p>
<p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpProxyport</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpProxyuser</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpProxypassword</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpsProxyIP</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpsProxyport</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpsProxyuser</tt></dt>
<dd><p>Default:</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">httpsProxypassword</tt></dt>
<dd><p>Default:</p>
</dd></dl>

</div>
</div>
<div class="section" id="using-the-propgen-virtual-machine">
<span id="index-1"></span><h2>Using the PropGen virtual machine</h2>
<div class="section" id="usage-accounts-passwords">
<h3>Usage, accounts, passwords</h3>
<ul class="simple">
<li>Download the virtual machine. Run it in a hypervisor. The virtual machine is a virtualbox, but can probably convert it to some other hypervisor if needs be.</li>
<li>There is an account propgen; this is under which all the programs run. Password: abc123. You <em>definitely must</em> change the password. (Login under this account, type passwd at the prompt.)</li>
<li>change the password of the mysql server for both the root account and the propgen account: sudo dpkg-reconfigure mysql-server-5.5. The MySQL password of the propgen user must also be changed in the settings.json file in the ehterpad-lite directory!</li>
<li>Both Etherpad lite and the Moinmoin wiki are preconfigured and start at boot time.</li>
</ul>
</div>
<div class="section" id="notes-on-the-virtual-machine-installation">
<h3>Notes on the virtual machine installation</h3>
<p>This section summaries the crucial steps to install the virtual machine that can be downloaded from Ubuntu One. It might help to setup an own installation.</p>
<ul>
<li><p class="first">It is a ubuntu 12.04 i386 server, with fairly minimal setup. Only OpenSSH is selected as software package in the initial selection.</p>
</li>
<li><p class="first">You might want to change the keyboad layout (currently configured via console-data as a German Apple USB keyboad, no deadkeys) and possibly the locale.</p>
</li>
<li><p class="first">Plain installation of ubuntu from ISO image (no hypervisor extensions installed; this is recommendable to do once you have chosen your hypervisor setup)</p>
</li>
<li><p class="first">Install mysql, follwowing these instructions: <a class="reference external" href="https://help.ubuntu.com/11.10/serverguide/C/mysql.html">https://help.ubuntu.com/11.10/serverguide/C/mysql.html</a> (should apply to 12.04 as well...). Same password abc123, <em>change the password</em> , type sudo dpkg-reconfigure mysql-server-5.5 in terminal. Change it then in the etherpad-lite configuration correspondingly.</p>
</li>
<li><p class="first">Installation of Etherpad lite follows these instructions: <a class="reference external" href="https://github.com/Pita/etherpad-lite">https://github.com/Pita/etherpad-lite</a> . Make sure to install node.js!</p>
</li>
<li><p class="first">Tell etherpad-lite to use the mysql database. Described here: <a class="reference external" href="https://github.com/Pita/etherpad-lite/wiki/How-to-use-Etherpad-Lite-with-MySQL">https://github.com/Pita/etherpad-lite/wiki/How-to-use-Etherpad-Lite-with-MySQL</a> . The user to use here is propgen. Note: In this description, in settings.json also needs to alter the databse entry; &#8216;store&#8217; is incorrect (it is the table, not the database) and has to be replaced by &#8216;etherpad-lite&#8217; in the example. In settings.json, you have to put the password given to mysql; whatever you have changed it to!</p>
</li>
<li><p class="first">Install the necessary python libraries, in particular, we need</p>
<ul class="simple">
<li>pip to support python module installation <a class="reference external" href="http://pypi.python.org/pypi/pip">http://pypi.python.org/pypi/pip</a> (pip will pull in necessary libraries automatically)</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install python-pip
</pre></div>
</div>
<ul class="simple">
<li>mechnize from <a class="reference external" href="http://wwwsearch.sourceforge.net/mechanize/">http://wwwsearch.sourceforge.net/mechanize/</a> ; this should be at leat version 2.5 (note: some Linux installations seem to have older versions of mechanized installed; they are known to NOT work!)</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install mechanize
</pre></div>
</div>
<ul class="simple">
<li>Sphinx, to generate the documentation (should be version 1.1.3 or later)</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install Sphinx
</pre></div>
</div>
</li>
<li><p class="first">Pull the actual distribution or propgen from github; it will include the moinmoin wiki already, with necessary adaptations. <a class="reference external" href="https://github.com/hkarl/propgen">https://github.com/hkarl/propgen</a></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> ~
<span class="nv">$ </span>git clone git://github.com/hkarl/propgen.git
</pre></div>
</div>
</li>
<li><p class="first">Try to start the wikiserver. It should say &#8220;Running on <a class="reference external" href="http://127.0.0.1:8080/">http://127.0.0.1:8080/</a> &#8221;. Direct your browser there, it should deny access; click on login. Use the ProjectMaster with 123abc.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>propgen
<span class="nv">$ </span><span class="nb">cd </span>moin
<span class="nv">$ </span>python wikiserver.py
</pre></div>
</div>
</li>
<li><p class="first">Let&#8217;s make sure that the etherpad-lite server starts at every boot. Upstart script for etherpad-lite, copied and slightly adapted from this source <a class="reference external" href="http://raphael.kallensee.name/journal/etherpad-lite-auf-ubuntu-server-apache-upstart/">http://raphael.kallensee.name/journal/etherpad-lite-auf-ubuntu-server-apache-upstart/</a>. This script goes into /etc/init/. Note that this configuration write logs into ~/etherpad-lite/log; you might want to check them occasionally.  WARNING:  It sometimes seems so have problems connecting to the SQL database correctly. No idea why this is the case, still monitoring problem :-(.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>description <span class="s2">&quot;etherpad-lite&quot;</span>

start on started networking and started mysql 
stop on runlevel <span class="o">[</span>!2345<span class="o">]</span>

env <span class="nv">NODEBIN</span><span class="o">=</span>/usr/local/bin/node 
env <span class="nv">EPHOME</span><span class="o">=</span>/home/propgen/etherpad-lite
env <span class="nv">EPLOGS</span><span class="o">=</span>/home/propgen/etherpad-lite/log
env <span class="nv">EPUSER</span><span class="o">=</span>propgen 
env <span class="nv">EPGROUP</span><span class="o">=</span>propgen

pre-start script
    chdir <span class="nv">$EPHOME</span>
    mkdir <span class="nv">$EPLOGS</span>                              <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>chown <span class="nv">$EPUSER</span>:<span class="nv">$EPGROUP</span> <span class="nv">$EPLOGS</span>             <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>chmod 0755 <span class="nv">$EPLOGS</span>                         <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>chown -R <span class="nv">$EPUSER</span>:<span class="nv">$EPGROUP</span> <span class="nv">$EPHOME</span>/var      <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>mv access.log access.beforeboot		<span class="o">||</span> <span class="nb">true</span>
<span class="nb">    </span>mv error.log error.beforeboot		<span class="o">||</span> <span class="nb">true</span>
end script
                        						

script
  <span class="nb">cd</span> <span class="nv">$EPHOME</span>/node
  <span class="nb">exec </span>su -s /bin/bash -c <span class="s1">&#39;exec &quot;$0&quot; &quot;$@&quot;&#39;</span> <span class="nv">$EPUSER</span> <span class="nv">$NODEBIN</span> server.js <span class="se">\</span>
			&gt;&gt; <span class="nv">$EPLOGS</span>/access.log <span class="se">\</span>
			2&gt;&gt; <span class="nv">$EPLOGS</span>/error.log
end script
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Provide an upstart script to have the wikiserver starting at boot-time; similar logic as for the etherpad-lite upstart script.</li>
</ul>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>description <span class="s2">&quot;moinwiki&quot;</span>

start on started networking 
stop on runlevel <span class="o">[</span>!2345<span class="o">]</span>

env <span class="nv">MWHOME</span><span class="o">=</span>/home/propgen/propgen/moin
env <span class="nv">MWLOGS</span><span class="o">=</span>/home/propgen/propgen/moin/log
env <span class="nv">MWUSER</span><span class="o">=</span>propgen 
env <span class="nv">MWGROUP</span><span class="o">=</span>propgen

pre-start script
    chdir <span class="nv">$MWHOME</span>
    mkdir <span class="nv">$MWLOGS</span>                              <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>chown <span class="nv">$MWUSER</span>:<span class="nv">$MWGROUP</span> <span class="nv">$MWLOGS</span>             <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>chmod 0755 <span class="nv">$MWLOGS</span>                         <span class="o">||</span><span class="nb">true</span>
<span class="nb">    </span>mv access.log access.beforeboot		<span class="o">||</span> <span class="nb">true</span>
<span class="nb">    </span>mv error.log error.beforeboot		<span class="o">||</span> <span class="nb">true</span>
end script
                    
script
  <span class="c"># echo &#39;exec &quot;$0&quot; &quot;$@&quot;&#39; &gt;&gt; $MWLOGS/access.log</span>
  <span class="nb">exec </span>su -s /bin/bash -l -c <span class="s2">&quot;cd $MWHOME ; python wikiserver.py &gt;&gt; $MWLOGS/access.log 2&gt;&gt; $MWLOGS/error.log&quot;</span> <span class="nv">$MWUSER</span> 
end script
                        						
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Install an up-to-date TexLive. Unfortunately, even ubunutu 12.04 still comes with an 2009 texlive, far too outdated for our needs. Follow instructions here: <a class="reference external" href="http://www.tug.org/texlive/quickinstall.html">http://www.tug.org/texlive/quickinstall.html</a> or try the backported TexLive 2012 from here: <a class="reference external" href="http://askubuntu.com/questions/163682/how-do-i-install-the-latest-tex-live-2012">http://askubuntu.com/questions/163682/how-do-i-install-the-latest-tex-live-2012</a>. Note: this can take a while...</li>
</ul>
<p>Note: there is a little pitfall. Don&#8217;t put the PATH definition in .bashrc, else the upstart script will not find the latex binaries. The texlive PATH extension has to go into ~/.profile.</p>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2012, 2013, Holger Karl.
      Last updated on Apr 19, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>